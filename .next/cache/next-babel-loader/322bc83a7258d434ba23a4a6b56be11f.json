{"ast":null,"code":"var MongoClient = require(\"mongodb\").MongoClient;\n\nvar url = \"mongodb+srv://kevinc:THISisa1234@course-sm27n.mongodb.net/\";\nexport default (async (req, res) => {\n  const user = JSON.parse(req.body) || null;\n  console.log(req.body);\n\n  try {\n    if (!user) {\n      throw \"No user object sent\";\n    }\n\n    MongoClient.connect(url, function (err, db) {\n      if (err) throw err;\n      var dbo = db.db(\"test\");\n      dbo.collection(\"users\").insertOne(user, function (err, res) {\n        if (err) throw err;\n        console.log(\"1 document inserted\");\n        res.send(res);\n        db.close();\n      });\n    });\n  } catch (error) {\n    res.status(400);\n    res.send({\n      error: error\n    });\n  }\n});","map":{"version":3,"sources":["/Users/kevin/code/egghead-mongo-schema/pages/api/user.js"],"names":["MongoClient","require","url","req","res","user","JSON","parse","body","console","log","connect","err","db","dbo","collection","insertOne","send","close","error","status"],"mappings":"AAAA,IAAIA,WAAW,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBD,WAArC;;AACA,IAAIE,GAAG,GAAG,4DAAV;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACjC,QAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWJ,GAAG,CAACK,IAAf,KAAwB,IAArC;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYP,GAAG,CAACK,IAAhB;;AAEA,MAAI;AACF,QAAI,CAACH,IAAL,EAAW;AACT,YAAM,qBAAN;AACD;;AAEDL,IAAAA,WAAW,CAACW,OAAZ,CAAoBT,GAApB,EAAyB,UAAUU,GAAV,EAAeC,EAAf,EAAmB;AAC1C,UAAID,GAAJ,EAAS,MAAMA,GAAN;AACT,UAAIE,GAAG,GAAGD,EAAE,CAACA,EAAH,CAAM,MAAN,CAAV;AAEAC,MAAAA,GAAG,CAACC,UAAJ,CAAe,OAAf,EAAwBC,SAAxB,CAAkCX,IAAlC,EAAwC,UAAUO,GAAV,EAAeR,GAAf,EAAoB;AAC1D,YAAIQ,GAAJ,EAAS,MAAMA,GAAN;AACTH,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAN,QAAAA,GAAG,CAACa,IAAJ,CAASb,GAAT;AACAS,QAAAA,EAAE,CAACK,KAAH;AACD,OALD;AAMD,KAVD;AAWD,GAhBD,CAgBE,OAAOC,KAAP,EAAc;AACdf,IAAAA,GAAG,CAACgB,MAAJ,CAAW,GAAX;AACAhB,IAAAA,GAAG,CAACa,IAAJ,CAAS;AAAEE,MAAAA,KAAK,EAAEA;AAAT,KAAT;AACD;AACF,CAxBD","sourcesContent":["var MongoClient = require(\"mongodb\").MongoClient;\nvar url = \"mongodb+srv://kevinc:THISisa1234@course-sm27n.mongodb.net/\";\n\nexport default async (req, res) => {\n  const user = JSON.parse(req.body) || null;\n  console.log(req.body);\n\n  try {\n    if (!user) {\n      throw \"No user object sent\";\n    }\n\n    MongoClient.connect(url, function (err, db) {\n      if (err) throw err;\n      var dbo = db.db(\"test\");\n\n      dbo.collection(\"users\").insertOne(user, function (err, res) {\n        if (err) throw err;\n        console.log(\"1 document inserted\");\n        res.send(res);\n        db.close();\n      });\n    });\n  } catch (error) {\n    res.status(400);\n    res.send({ error: error });\n  }\n};\n"]},"metadata":{},"sourceType":"module"}