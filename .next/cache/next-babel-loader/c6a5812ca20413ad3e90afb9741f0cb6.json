{"ast":null,"code":"var MongoClient = require(\"mongodb\").MongoClient;\n\nvar url = \"mongodb+srv://kevinc:THISisa1234@course-sm27n.mongodb.net/\";\nexport default (async (req, res) => {\n  const user = req.body || null;\n\n  try {\n    if (user) {\n      MongoClient.connect(url, function (err, db) {\n        if (err) throw err;\n        var dbo = db.db(\"test\");\n        dbo.collection(\"users\").insertOne(user, function (err, res) {\n          if (err) throw err;\n          console.log(\"1 document inserted\");\n          db.close();\n        });\n      });\n    } else {\n      res.status(301);\n      res.send(\"No user sent\");\n    } // client.collection(\"users\").find({}, function (err, response) {\n    //   if (err) throw err;\n    //   res.send(response);\n    //   client.close();\n    //   console.log(\"DB Connection closed\");\n    // });\n\n  } catch (error) {\n    res.status(400);\n    res.send(error);\n  }\n});","map":{"version":3,"sources":["/Users/kevin/code/egghead-mongo-schema/pages/api/user.js"],"names":["MongoClient","require","url","req","res","user","body","connect","err","db","dbo","collection","insertOne","console","log","close","status","send","error"],"mappings":"AAAA,IAAIA,WAAW,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBD,WAArC;;AACA,IAAIE,GAAG,GAAG,4DAAV;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACjC,QAAMC,IAAI,GAAGF,GAAG,CAACG,IAAJ,IAAY,IAAzB;;AAEA,MAAI;AACF,QAAID,IAAJ,EAAU;AACRL,MAAAA,WAAW,CAACO,OAAZ,CAAoBL,GAApB,EAAyB,UAAUM,GAAV,EAAeC,EAAf,EAAmB;AAC1C,YAAID,GAAJ,EAAS,MAAMA,GAAN;AACT,YAAIE,GAAG,GAAGD,EAAE,CAACA,EAAH,CAAM,MAAN,CAAV;AAEAC,QAAAA,GAAG,CAACC,UAAJ,CAAe,OAAf,EAAwBC,SAAxB,CAAkCP,IAAlC,EAAwC,UAAUG,GAAV,EAAeJ,GAAf,EAAoB;AAC1D,cAAII,GAAJ,EAAS,MAAMA,GAAN;AACTK,UAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAL,UAAAA,EAAE,CAACM,KAAH;AACD,SAJD;AAKD,OATD;AAUD,KAXD,MAWO;AACLX,MAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX;AACAZ,MAAAA,GAAG,CAACa,IAAJ,CAAS,cAAT;AACD,KAfC,CAgBF;AACA;AACA;AACA;AACA;AACA;;AACD,GAtBD,CAsBE,OAAOC,KAAP,EAAc;AACdd,IAAAA,GAAG,CAACY,MAAJ,CAAW,GAAX;AACAZ,IAAAA,GAAG,CAACa,IAAJ,CAASC,KAAT;AACD;AACF,CA7BD","sourcesContent":["var MongoClient = require(\"mongodb\").MongoClient;\nvar url = \"mongodb+srv://kevinc:THISisa1234@course-sm27n.mongodb.net/\";\n\nexport default async (req, res) => {\n  const user = req.body || null;\n\n  try {\n    if (user) {\n      MongoClient.connect(url, function (err, db) {\n        if (err) throw err;\n        var dbo = db.db(\"test\");\n\n        dbo.collection(\"users\").insertOne(user, function (err, res) {\n          if (err) throw err;\n          console.log(\"1 document inserted\");\n          db.close();\n        });\n      });\n    } else {\n      res.status(301);\n      res.send(\"No user sent\");\n    }\n    // client.collection(\"users\").find({}, function (err, response) {\n    //   if (err) throw err;\n    //   res.send(response);\n    //   client.close();\n    //   console.log(\"DB Connection closed\");\n    // });\n  } catch (error) {\n    res.status(400);\n    res.send(error);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}