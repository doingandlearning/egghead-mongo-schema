{"ast":null,"code":"import connectToDb from \"../../utils/db\";\n\nvar MongoClient = require(\"mongodb\").MongoClient;\n\nvar url = \"mongodb+srv://kevinc:THISisa1234@course-sm27n.mongodb.net/test?retryWrites=true&w=majority\";\nexport default (async (req, res) => {\n  const client = await connectToDb();\n  const document = req.body;\n\n  try {\n    MongoClient.connect(url, function (err, db) {\n      if (err) throw err;\n      var dbo = db.db(\"mydb\");\n      var myobj = {\n        name: \"Company Inc\",\n        address: \"Highway 37\"\n      };\n      dbo.collection(\"customers\").insertOne(myobj, function (err, res) {\n        if (err) throw err;\n        console.log(\"1 document inserted\");\n        db.close();\n      });\n    }); // client.collection(\"users\").find({}, function (err, response) {\n    //   if (err) throw err;\n    //   res.send(response);\n    //   client.close();\n    //   console.log(\"DB Connection closed\");\n    // });\n  } catch (error) {\n    res.status(400);\n    res.send(error);\n  }\n});","map":{"version":3,"sources":["/Users/kevin/code/egghead-mongo-schema/pages/api/user.js"],"names":["connectToDb","MongoClient","require","url","req","res","client","document","body","connect","err","db","dbo","myobj","name","address","collection","insertOne","console","log","close","error","status","send"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,gBAAxB;;AACA,IAAIC,WAAW,GAAGC,OAAO,CAAC,SAAD,CAAP,CAAmBD,WAArC;;AACA,IAAIE,GAAG,GACL,4FADF;AAGA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACjC,QAAMC,MAAM,GAAG,MAAMN,WAAW,EAAhC;AACA,QAAMO,QAAQ,GAAGH,GAAG,CAACI,IAArB;;AAEA,MAAI;AACFP,IAAAA,WAAW,CAACQ,OAAZ,CAAoBN,GAApB,EAAyB,UAAUO,GAAV,EAAeC,EAAf,EAAmB;AAC1C,UAAID,GAAJ,EAAS,MAAMA,GAAN;AACT,UAAIE,GAAG,GAAGD,EAAE,CAACA,EAAH,CAAM,MAAN,CAAV;AACA,UAAIE,KAAK,GAAG;AAAEC,QAAAA,IAAI,EAAE,aAAR;AAAuBC,QAAAA,OAAO,EAAE;AAAhC,OAAZ;AACAH,MAAAA,GAAG,CAACI,UAAJ,CAAe,WAAf,EAA4BC,SAA5B,CAAsCJ,KAAtC,EAA6C,UAAUH,GAAV,EAAeL,GAAf,EAAoB;AAC/D,YAAIK,GAAJ,EAAS,MAAMA,GAAN;AACTQ,QAAAA,OAAO,CAACC,GAAR,CAAY,qBAAZ;AACAR,QAAAA,EAAE,CAACS,KAAH;AACD,OAJD;AAKD,KATD,EADE,CAWF;AACA;AACA;AACA;AACA;AACA;AACD,GAjBD,CAiBE,OAAOC,KAAP,EAAc;AACdhB,IAAAA,GAAG,CAACiB,MAAJ,CAAW,GAAX;AACAjB,IAAAA,GAAG,CAACkB,IAAJ,CAASF,KAAT;AACD;AACF,CAzBD","sourcesContent":["import connectToDb from \"../../utils/db\";\nvar MongoClient = require(\"mongodb\").MongoClient;\nvar url =\n  \"mongodb+srv://kevinc:THISisa1234@course-sm27n.mongodb.net/test?retryWrites=true&w=majority\";\n\nexport default async (req, res) => {\n  const client = await connectToDb();\n  const document = req.body;\n\n  try {\n    MongoClient.connect(url, function (err, db) {\n      if (err) throw err;\n      var dbo = db.db(\"mydb\");\n      var myobj = { name: \"Company Inc\", address: \"Highway 37\" };\n      dbo.collection(\"customers\").insertOne(myobj, function (err, res) {\n        if (err) throw err;\n        console.log(\"1 document inserted\");\n        db.close();\n      });\n    });\n    // client.collection(\"users\").find({}, function (err, response) {\n    //   if (err) throw err;\n    //   res.send(response);\n    //   client.close();\n    //   console.log(\"DB Connection closed\");\n    // });\n  } catch (error) {\n    res.status(400);\n    res.send(error);\n  }\n};\n"]},"metadata":{},"sourceType":"module"}